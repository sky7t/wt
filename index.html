<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèãÔ∏è‚Äç‚ôÇÔ∏è Workout Tracker</title>
    <!-- Browser Tab Icon (Favicon) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ú®</text></svg>">
    <!-- Bootstrap CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        /* Light Mode (Default) */
        body {
            background-color: #f8f9fa;
            transition: background-color 0.3s, color 0.3s;
        }
        .container { max-width: 960px; position: relative; }
        .table th, .table td { vertical-align: middle; }
        #import-json-input { display: none; }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #212529;
            color: #dee2e6;
        }
        /* Fix for dark titles on dark background */
        body.dark-mode h1,
        body.dark-mode h3 {
            color: #dee2e6;
        }
        body.dark-mode .card {
            background-color: #343a40;
            border-color: #495057;
        }
        body.dark-mode .card-header,
        body.dark-mode .table-dark {
            background-color: #2c3034;
            border-bottom-color: #495057;
        }
        body.dark-mode .table {
            color: #dee2e6;
            border-color: #495057;
        }
        body.dark-mode .table-striped > tbody > tr:nth-of-type(odd) > * {
            --bs-table-accent-bg: rgba(255, 255, 255, 0.04);
        }
        body.dark-mode .form-control {
            background-color: #495057;
            color: #dee2e6;
            border-color: #6c757d;
        }
        body.dark-mode .form-control::placeholder {
            color: #adb5bd;
        }
        body.dark-mode .text-muted {
            color: #adb5bd !important;
        }
        body.dark-mode .btn-info {
            background-color: #0dcaf0;
            border-color: #0dcaf0;
            color: #000;
        }
    </style>
</head>
<body>

    <div class="container py-5">
        <!-- Dark Mode Toggle -->
        <div class="form-check form-switch position-absolute top-0 end-0 m-3 p-2">
            <input class="form-check-input" type="checkbox" role="switch" id="darkModeSwitch" style="cursor: pointer;">
            <label class="form-check-label" for="darkModeSwitch" style="cursor: pointer;">üåô</label>
        </div>

        <header class="text-center mb-5">
            <h1 class="display-5">üèãÔ∏è‚Äç‚ôÇÔ∏è Minimalist Workout Tracker</h1>
            <p class="lead text-muted">Log your Upper and Lower Body workouts here. Data is saved automatically.</p>
        </header>

        <!-- Upper Body Workout Table -->
        <div class="card shadow-sm mb-5" id="upper-body-card">
            <div class="card-header"><h3 class="my-2">üí™ Upper Body Workout</h3></div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="table-dark">
                            <tr><th>Exercise</th><th>Set 1 (kg/reps)</th><th>Set 2 (kg/reps)</th><th>Set 3 (kg/reps)</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Chest Press</strong><br><small class="text-muted">Chest, Shoulders, Triceps</small></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Chest Press Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Chest Press Set 1 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Chest Press Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Chest Press Set 2 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Chest Press Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Chest Press Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                            <tr>
                                <td><strong>Lat Pulldown</strong><br><small class="text-muted">Back, Biceps</small></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Lat Pulldown Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Lat Pulldown Set 1 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Lat Pulldown Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Lat Pulldown Set 2 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Lat Pulldown Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Lat Pulldown Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                            <tr>
                                <td><strong>Shoulder Press</strong><br><small class="text-muted">Shoulders, Triceps</small></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Shoulder Press Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Shoulder Press Set 1 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Shoulder Press Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Shoulder Press Set 2 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Shoulder Press Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Shoulder Press Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                            <tr>
                                <td><strong>Seated Row</strong><br><small class="text-muted">Back</small></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Row Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Row Set 1 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Row Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Row Set 2 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Row Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Row Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                            <tr>
                                <td><strong>Biceps Curl</strong><br><small class="text-muted">Biceps</small></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Biceps Curl Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Biceps Curl Set 1 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Biceps Curl Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Biceps Curl Set 2 Reps" inputmode="decimal"></div></td>
                                <td><!-- 2 Sets Only --></td>
                            </tr>
                            <tr>
                                <td><strong>Triceps Press</strong><br><small class="text-muted">Triceps</small></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Triceps Press Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Triceps Press Set 1 Reps" inputmode="decimal"></div></td>
                                <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Triceps Press Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Triceps Press Set 2 Reps" inputmode="decimal"></div></td>
                                <td><!-- 2 Sets Only --></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Lower Body Workout Table -->
        <div class="card shadow-sm mb-5" id="lower-body-card">
            <div class="card-header"><h3 class="my-2">ü¶µ Lower Body & Core Workout</h3></div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="table-dark">
                               <tr><th>Exercise</th><th>Set 1 (kg/reps)</th><th>Set 2 (kg/reps)</th><th>Set 3 (kg/reps)</th></tr>
                        </thead>
                        <tbody>
                               <tr>
                                 <td><strong>Leg Press</strong><br><small class="text-muted">Quads, Glutes, Hamstrings</small></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Leg Press Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Leg Press Set 1 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Leg Press Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Leg Press Set 2 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Leg Press Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Leg Press Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                            <tr>
                                 <td><strong>Seated Leg Curl</strong><br><small class="text-muted">Hamstrings</small></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Leg Curl Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Leg Curl Set 1 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Leg Curl Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Leg Curl Set 2 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Leg Curl Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Leg Curl Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                            <tr>
                                 <td><strong>Leg Extension</strong><br><small class="text-muted">Quads</small></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Leg Extension Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Leg Extension Set 1 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Leg Extension Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Leg Extension Set 2 Reps" inputmode="decimal"></div></td>
                                 <td><!-- 2 Sets Only --></td>
                            </tr>
                            <tr>
                                 <td><strong>Seated Calf Raise</strong><br><small class="text-muted">Calves</small></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Calf Raise Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Calf Raise Set 1 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Calf Raise Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Calf Raise Set 2 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Seated Calf Raise Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Seated Calf Raise Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                            <tr>
                                 <td><strong>Ab Machine</strong><br><small class="text-muted">Abdominals</small></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Ab Machine Set 1 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Ab Machine Set 1 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Ab Machine Set 2 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Ab Machine Set 2 Reps" inputmode="decimal"></div></td>
                                 <td><div class="d-flex flex-column flex-sm-row gap-1"><input type="number" class="form-control" placeholder="kg" aria-label="Ab Machine Set 3 Weight" inputmode="decimal"><input type="number" class="form-control" placeholder="reps" aria-label="Ab Machine Set 3 Reps" inputmode="decimal"></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-center mt-4">
            <button class="btn btn-primary btn-lg" onclick="saveToCloud()">Save to Cloud</button>
            <button class="btn btn-secondary btn-lg" onclick="loadFromCloud()">Load from Cloud</button>
            <button class="btn btn-success btn-lg" onclick="exportToJson()">Export to JSON</button>
            <label for="import-json-input" class="btn btn-info btn-lg">Import from JSON</label>
            <input type="file" id="import-json-input" accept=".json" onchange="importFromJson(event)">
            <button class="btn btn-danger btn-lg" onclick="clearInputs()">Clear All Inputs</button>
        </div>

    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- App Logic Script -->
    <script>
        const DATA_STORAGE_KEY = 'minimalistWorkoutData';
        const THEME_STORAGE_KEY = 'minimalistWorkoutTheme';

        // --- JSONBin.com Configuration ---
        const JSONBIN_MASTER_KEY = '__API_KEY__'; 
        const JSONBIN_BIN_ID = '688755047b4b8670d8a886a8'; 
        const JSONBIN_URL = `https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`;

        function getWorkoutDataFromPage() {
            const workoutData = { upperBody: [], lowerBody: [] };
            document.querySelectorAll('#upper-body-card tbody tr').forEach(row => {
                const inputs = row.querySelectorAll('input[type="number"]');
                const rowData = {
                    set1: { weight: inputs[0]?.value || '', reps: inputs[1]?.value || '' },
                    set2: { weight: inputs[2]?.value || '', reps: inputs[3]?.value || '' },
                    set3: { weight: inputs[4]?.value || '', reps: inputs[5]?.value || '' }
                };
                workoutData.upperBody.push(rowData);
            });
            document.querySelectorAll('#lower-body-card tbody tr').forEach(row => {
                const inputs = row.querySelectorAll('input[type="number"]');
                const rowData = {
                    set1: { weight: inputs[0]?.value || '', reps: inputs[1]?.value || '' },
                    set2: { weight: inputs[2]?.value || '', reps: inputs[3]?.value || '' },
                    set3: { weight: inputs[4]?.value || '', reps: inputs[5]?.value || '' }
                };
                workoutData.lowerBody.push(rowData);
            });
            return workoutData;
        }

        function populatePageWithData(workoutData, showAlert = false) {
            if (!workoutData || !workoutData.upperBody || !workoutData.lowerBody) {
                if (showAlert) alert("Import failed: Invalid data format.");
                return;
            }
            document.querySelectorAll('#upper-body-card tbody tr').forEach((row, index) => {
                const rowData = workoutData.upperBody[index];
                if (rowData) {
                    const inputs = row.querySelectorAll('input[type="number"]');
                    // Ensure inputs exist before trying to assign value
                    if(inputs[0]) inputs[0].value = rowData.set1.weight;
                    if(inputs[1]) inputs[1].value = rowData.set1.reps;
                    if(inputs[2]) inputs[2].value = rowData.set2.weight;
                    if(inputs[3]) inputs[3].value = rowData.set2.reps;
                    if(inputs[4]) inputs[4].value = rowData.set3.weight;
                    if(inputs[5]) inputs[5].value = rowData.set3.reps;
                }
            });
            document.querySelectorAll('#lower-body-card tbody tr').forEach((row, index) => {
                const rowData = workoutData.lowerBody[index];
                if (rowData) {
                    const inputs = row.querySelectorAll('input[type="number"]');
                     // Ensure inputs exist before trying to assign value
                    if(inputs[0]) inputs[0].value = rowData.set1.weight;
                    if(inputs[1]) inputs[1].value = rowData.set1.reps;
                    if(inputs[2]) inputs[2].value = rowData.set2.weight;
                    if(inputs[3]) inputs[3].value = rowData.set2.reps;
                    if(inputs[4]) inputs[4].value = rowData.set3.weight;
                    if(inputs[5]) inputs[5].value = rowData.set3.reps;
                }
            });
            if (showAlert) alert('Workout data loaded successfully!');
        }

        // This function will still save to local storage for instant feedback/offline use
        function saveToLocalStorage() {
            const workoutData = getWorkoutDataFromPage();
            localStorage.setItem(DATA_STORAGE_KEY, JSON.stringify(workoutData));
        }

        function loadFromLocalStorage() {
            const savedDataJSON = localStorage.getItem(DATA_STORAGE_KEY);
            if (savedDataJSON) {
                try {
                    const workoutData = JSON.parse(savedDataJSON);
                    populatePageWithData(workoutData, false);
                } catch (error) {
                    console.error("Error parsing data from local storage:", error);
                    localStorage.removeItem(DATA_STORAGE_KEY); // Clear corrupt data
                }
            }
        }

        // --- JSONBin.com Functions ---

        async function saveToCloud() {
            if (!JSONBIN_MASTER_KEY || JSONBIN_MASTER_KEY === '__API_KEY__' || !JSONBIN_BIN_ID || JSONBIN_BIN_ID === '688755047b4b8670d8a886a8') {
                alert("Please set your JSONBIN_MASTER_KEY and JSONBIN_BIN_ID in the script to save to the cloud.");
                return;
            }
            const workoutData = getWorkoutDataFromPage();
            try {
                const response = await fetch(JSONBIN_URL, {
                    method: 'PUT', // Use PUT to update an existing bin
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_MASTER_KEY,
                        'X-Bin-Meta-By-Id': 'false' // Important for updating existing bin
                    },
                    body: JSON.stringify(workoutData)
                });

                if (response.ok) {
                    alert('Workout data saved to cloud successfully!');
                } else {
                    const errorText = await response.text();
                    alert(`Failed to save data to cloud: ${response.status} ${response.statusText}\n${errorText}`);
                    console.error('Failed to save data to cloud:', response.status, response.statusText, errorText);
                }
            } catch (error) {
                alert('An error occurred while saving to cloud. Check console for details.');
                console.error('Error saving to cloud:', error);
            }
        }

        async function loadFromCloud() {
            if (!JSONBIN_MASTER_KEY || JSONBIN_MASTER_KEY === '__API_KEY__' || !JSONBIN_BIN_ID || JSONBIN_BIN_ID === '688755047b4b8670d8a886a8') {
                alert("Please set your JSONBIN_MASTER_KEY and JSONBIN_BIN_ID in the script to load from the cloud.");
                return;
            }
            try {
                const response = await fetch(JSONBIN_URL, {
                    method: 'GET',
                    headers: {
                        'X-Master-Key': JSONBIN_MASTER_KEY
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    populatePageWithData(data.record, true);
                    saveToLocalStorage();
                } else {
                    const errorText = await response.text();
                    alert(`Failed to load data from cloud: ${response.status} ${response.statusText}\n${errorText}`);
                    console.error('Failed to load data from cloud:', response.status, response.statusText, errorText);
                }
            } catch (error) {
                alert('An error occurred while loading from cloud. Check console for details.');
                console.error('Error loading from cloud:', error);
            }
        }

        // --- Existing Export/Import/Clear Functions ---

        function exportToJson() {
            const workoutData = getWorkoutDataFromPage();
            const dataStr = JSON.stringify(workoutData, null, 2);
            const blob = new Blob([dataStr], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `workout-${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function importFromJson(event) {
            const file = event.target.files[0];
            if (!file) { return; }
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const workoutData = JSON.parse(e.target.result);
                    populatePageWithData(workoutData, true);
                    saveToLocalStorage();
                } catch (error) {
                    alert("Error parsing JSON file: " + error.message);
                }
            };
            reader.readAsText(file);
            event.target.value = null;
        }

        function clearInputs() {
            if (confirm("Are you sure you want to clear all weights and reps? This will also clear your auto-saved data.")) {
                document.querySelectorAll('input[type="number"]').forEach(input => input.value = '');
                saveToLocalStorage();
            }
        }

        // --- Initializer ---
        document.addEventListener('DOMContentLoaded', () => {
            // Load workout data from local storage on page load
            loadFromLocalStorage();

            document.querySelectorAll('input[type="number"]').forEach(input => {
                input.addEventListener('input', saveToLocalStorage);
            });

            // --- Dark Mode Logic ---
            const darkModeSwitch = document.getElementById('darkModeSwitch');

            const enableDarkMode = () => {
                document.body.classList.add('dark-mode');
                localStorage.setItem(THEME_STORAGE_KEY, 'dark');
                darkModeSwitch.checked = true;
            };

            const disableDarkMode = () => {
                document.body.classList.remove('dark-mode');
                localStorage.setItem(THEME_STORAGE_KEY, 'light');
                darkModeSwitch.checked = false;
            };

            // Check for saved theme preference
            if (localStorage.getItem(THEME_STORAGE_KEY) === 'dark') {
                enableDarkMode();
            }

            // Add listener to the toggle
            darkModeSwitch.addEventListener('change', () => {
                if (darkModeSwitch.checked) {
                    enableDarkMode();
                } else {
                    disableDarkMode();
                }
            });
        });
    </script>
</body>
</html>
